Feature: api Amazon search testing

  Scenario: Simple query
    When I send a GET request to "s/ref=nb_sb_noss_2?url=search-alias%3Daps&field-keywords=simple"
    Then the response status should be 200
    And the response should contain the text "Amazon.co.uk: simple"

  Scenario: Number query
    When I send a GET request to "s/ref=nb_sb_noss_2?url=search-alias%3Daps&field-keywords=2"
    Then the response status should be 200
    And the response should contain the text "Amazon.co.uk: 2"

  Scenario: Special char query
    When I send a GET request to "s/ref=nb_sb_noss_2?url=search-alias%3Daps&field-keywords=$20"
    Then the response status should be 200
    And the response should contain the text "Amazon.co.uk: $20"

   # http://docs.aws.amazon.com/elasticloadbalancing/latest/classic/ts-elb-error-message.html
  Scenario Outline: correct long query
    When I send a GET request to "s/ref=nb_sb_noss_2?url=search-alias%3Daps&field-keywords=<query>"
    Then the response status should be 400
  Examples:
    | query       |
    | sasasasasasasasasasasasasasasasasasasassasasasasasasasasasasasasasasasasasasasasasassasasasasasasasasasasasasasasasasasasasasasassasasasasasasasasasasasasasasasasasasasasasassasasasasasasasasasasasasasasasasasasasasasassasasasasasasasasasasasasasasasasasasasasasassasasasasasasasasasasasasasasasasasasasasasassasasasasasasasasasasasasasasasasasasasasasassasasasasasasasasasasasasasasasasasasasasasassasasasasasasasasasasasasasasasasasasasasasassasasasasasasasasasasasasasasasasasasasasasassasasasasasasasasasasasasasasasasasasasasasassasasasasasasasasasasasasasasasasasasasasasassasasasasasasasasasasasasasasasasasasasasasassasasasasasasasasasasasasasasasasasasasasasassasasasasasasasasasasasasasasasasasasasasasassasasasasasasasasasasasasasasasasasasasasasassasasasasasasasasasasasasasasasasasasasasasassasasasasasasasasasasasasasasasasasasasasasassasasasasasasasasasasasasasasasasasasasasasassasasasasasasasasasasasasasasasasasasasasasassasasasasasasasasasasasasasasasasasasasasasassasasasasasasasasasasasasasasasasasasasasasassasasasasasasasasasasasasasasasasasasasasasassasasasasasasasasasasasasasasasasasasasasasassasasasasasasasasasasasasasasasasasasasasasassasasasasasasasasasasasasasasasasasasasasasassasasasasasasasasasasasasasasasasasasasasasassasasasasasasasasasasasasasasasasasasasasasassasasasasasasasasasasasasasasasasasasasasasassasasasasasasasasasasasasasasasasasasasasasassasasasasasasasasasasasasasasasasasasasasasassasasasasasasasasasasasasasasasasasasasasasassasasasasasasasasasasasasasasasasasasasasasassasasasasasasasasasasasasasasasasasasasasasassasasasasasasasasasasasasasasasasasasasasasassasasasasasasasasasasasasasasasasasasasasasassasasasasasasasasasasasasasasasasasasasasasassasasasasasasasasasasasasasasasasasasasasasassasasasasasasasasasasasasasasasasasasasasasasassasasasasasasasasasasasasasasasasasasasasasasasasasasassasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasassasasasasasasasasasasasasasasasasasasasasasassasasasasasasasasasasasasasasasasasasasasasasassasasasasasasasasasasasasasasasasasasasasasasasasasasassasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasassasasasasasasasasasasasasasasasasasasasasasassasasasasasasasasasasasasasasasasasasasasasasassasasasasasasasasasasasasasasasasasasasasasasasasasasassasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasassasasasasasasasasasasasasasasasasasasasasasassasasasasasasasasasasasasasasasasasasasasasasassasasasasasasasasasasasasasasasasasasasasasasasasasasassasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasassasasasasasasasasasasasasasasasasasasasasasassasasasasasasasasasasasasasasasasasasasasasasassasasasasasasasasasasasasasasasasasasasasasasasasasasassasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasassasasasasasasasasasasasasasasasasasasasasasassasasasasasasasasasasasasasasasasasasasasasasassasasasasasasasasasasasasasasasasasasasasasasasasasasassasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasa |

    # It shoud be a 400 error code, but according to:
    # http://docs.aws.amazon.com/elasticloadbalancing/latest/classic/ts-elb-error-message.html#ts-elb-errorcodes-http503
    # in this particular case its a 503 error code.
  Scenario Outline: Too long query
    When I send a GET request to "s/ref=nb_sb_noss_2?url=search-alias%3Daps&field-keywords=<query>"
    Then the response status should be 503
  Examples:
    | query |
    | sasasasasasasasasasasasasasasasasasasasasasassasasasasasasasasasasasasasasasasasasasasasassasasasasasasasasasasasasasasasasasasasasasassasasasasasasasasasasasasasasasasasasasasasassasasasasasasasasasasasasasasasasasasasasasassasasasasasasasasasasasasasasasasasasasasasassasasasasasasasasasasasasasasasasasasasasasassasasasasasasasasasasasasasasasasasasasasasassasasasasasasasasasasasasasasasasasasasasasassasasasasasasasasasasasasasasasasasasasasasassasasasasasasasasasasasasasasasasasasasasasassasasasasasasasasasasasasasasasasasasasasasassasasasasasasasasasasasasasasasasasasasasasassasasasasasasasasasasasasasasasasasasasasasassasasasasasasasasasasasasasasasasasasasasasassasasasasasasasasasasasasasasasasasasasasasassasasasasasasasasasasasasasasasasasasasasasassasasasasasasasasasasasasasasasasasasasasasassasasasasasasasasasasasasasasasasasasasasasassasasasasasasasasasasasasasasasasasasasasasassasasasasasasasasasasasasasasasasasasasasasassasasasasasasasasasasasasasasasasasasasasasassasasasasasasasasasasasasasasasasasasasasasassasasasasasasasasasasasasasasasasasasasasasassasasasasasasasasasasasasasasasasasasasasasassasasasasasasasasasasasasasasasasasasasasasassasasasasasasasasasasasasasasasasasasasasasassasasasasasasasasasasasasasasasasasasasasasassasasasasasasasasasasasasasasasasasasasasasassasasasasasasasasasasasasasasasasasasasasasassasasasasasasasasasasasasasasasasasasasasasassasasasasasasasasasasasasasasasasasasasasasassasasasasasasasasasasasasasasasasasasasasasassasasasasasasasasasasasasasasasasasasasasasassasasasasasasasasasasasasasasasasasasasasasassasasasasasasasasasasasasasasasasasasasasasassasasasasasasasasasasasasasasasasasasasasasassasasasasasasasasasasasasasasasasasasasasasassasasasasasasasasasasasasasasasasasasasasasassasasasasasasasasasasasasasasasasasasasasasasassasasasasasasasasasasasasasasasasasasasasasasasasasasassasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasassasasasasasasasasasasasasasasasasasasasasasassasasasasasasasasasasasasasasasasasasasasasasassasasasasasasasasasasasasasasasasasasasasasasasasasasassasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasassasasasasasasasasasasasasasasasasasasasasasassasasasasasasasasasasasasasasasasasasasasasasassasasasasasasasasasasasasasasasasasasasasasasasasasasassasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasassasasasasasasasasasasasasasasasasasasasasasassasasasasasasasasasasasasasasasasasasasasasasassasasasasasasasasasasasasasasasasasasasasasasasasasasassasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasassasasasasasasasasasasasasasasasasasasasasasassasasasasasasasasasasasasasasasasasasasasasasassasasasasasasasasasasasasasasasasasasasasasasasasasasassasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasassasasasasasasasasasasasasasasasasasasasasasassasasasasasasasasasasasasasasasasasasasasasasassasasasasasasasasasasasasasasasasasasasasasasasasasasassasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasasas |
